<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width">
<style>
* {
  margin: 0;
  padding: 0;
}
body {
  background: black;
}
canvas {
  display: block;
}
</style>
</head>
<body>
<script type="module">
import * as THREE from "https://cdn.skypack.dev/three@0.136.0";
import { OrbitControls } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js";
import { VRButton } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/webxr/VRButton.js";
import { loadGLB } from "./loadGLB.js";

onload = async () => {
  const canvas = document.createElement("canvas");
  document.body.appendChild(canvas);

  const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
  const scene = new THREE.Scene();
  const width = window.innerWidth;
  const height = window.innerHeight;

  renderer.setPixelRatio(1);
  renderer.setSize(width, height);
  renderer.gammaOutput = true;
  renderer.gammaFactor = 2.2;

  const camera = new THREE.PerspectiveCamera(45, width / height, 1, 100);
  camera.position.set(0, 3, 5);
  //camera.position.set(0, 1.8, 0);
  //camera.rotation.set(100, Math.PI / 4, 50);
  //camera.lookAt(new THREE.Vector3(0, 1.8, -3));
  //console.log(camera.rotation)

  const controls = new OrbitControls(camera, renderer.domElement);
  // 滑らかにカメラコントローラーを制御する
  controls.enableDamping = true;
  controls.dampingFactor = 0.2;

  const light = new THREE.AmbientLight(0xFFFFFF, 1.0);
  scene.add(light);

  const url = "./fukui-shimbun.glb";
  const model = await loadGLB(url);
  /*
  model.traverse((object) => {
    if (object.isMesh) {
      object.material.color.r = 1;
      object.material.color.g = 0;
      object.material.color.b = 0;
      object.material.transparent = true;
      object.material.opacity = .8;
    }
  });
  */
  model.position.set(0, 0, 0);
  scene.add(model);

  document.body.appendChild(VRButton.createButton(renderer));
  renderer.xr.enabled = true;

  renderer.setAnimationLoop(() => {
    controls.update();
    if (model) {
      //model.rotation.y += .01;
    }
    renderer.render(scene, camera);
  });
};
</script>
</body>
</html>
